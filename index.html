<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Phrasal Verb Diary üéÄ</title>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&family=Kodchasan:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --bg: #fff0f5;
            --card: #ffffff;
            --primary: #ffb7b2; /* Pastel Red */
            --secondary: #a0c4ff; /* Pastel Blue */
            --highlight: #fdffb6; /* Pastel Yellow */
            --accent: #caffbf; /* Pastel Green */
            --text: #6d6875;
            --border-r: 15px;
        }

        body {
            font-family: 'Mali', cursive;
            background-color: var(--bg);
            background-image: radial-gradient(#ffd1dc 15%, transparent 16%);
            background-size: 25px 25px;
            margin: 0;
            padding: 20px;
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #ff9aa2;
            text-shadow: 2px 2px 0 #fff;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        /* --- Toolbar (Sticky) --- */
        .toolbar {
            position: sticky;
            top: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
            z-index: 100;
            margin-bottom: 20px;
            border: 2px solid var(--primary);
        }

        .tool-btn {
            background: none;
            border: 2px solid #eee;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 1.2rem;
            color: var(--text);
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tool-btn:hover { background: var(--highlight); transform: scale(1.1); }
        .tool-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* Color Picker hidden input */
        #color-picker { visibility: hidden; width: 0; height: 0; position: absolute; }
        .color-label {
            width: 30px; height: 30px; border-radius: 50%;
            background: linear-gradient(45deg, red, blue);
            cursor: pointer; border: 2px solid #ddd;
        }

        /* --- Main Form --- */
        .main-card {
            background: var(--card);
            padding: 30px;
            border-radius: var(--border-r);
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            border: 4px dashed #ffc8dd;
        }

        .header-input {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section-block {
            background: #f9fbfd;
            border: 2px solid #eef;
            border-radius: var(--border-r);
            padding: 20px;
            margin-bottom: 25px;
            position: relative;
        }

        .section-block.s1 { border-color: #ffb7b2; background: #fff5f5; }
        .section-block.s2 { border-color: #a0c4ff; background: #f0f8ff; }
        .section-block.s3 { border-color: #caffbf; background: #fafff5; }
        .section-block.s4 { border-color: #bdb2ff; background: #f5f3ff; }

        .section-title {
            position: absolute;
            top: -15px;
            left: 20px;
            background: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .s1 .section-title { color: #ff6f61; border: 2px solid #ffb7b2; }
        .s2 .section-title { color: #4dabf7; border: 2px solid #a0c4ff; }
        .s3 .section-title { color: #69db7c; border: 2px solid #caffbf; }
        .s4 .section-title { color: #9775fa; border: 2px solid #bdb2ff; }

        .row { display: flex; gap: 10px; margin-bottom: 10px; }
        .col { flex: 1; }

        label {
            display: block;
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 3px;
            font-family: 'Kodchasan', sans-serif;
        }

        /* --- Content Editable Div (Instead of Input) --- */
        .editable {
            width: 100%;
            min-height: 40px;
            padding: 10px;
            background: white;
            border: 2px dashed #ddd;
            border-radius: 10px;
            font-family: 'Kodchasan', sans-serif;
            outline: none;
            transition: 0.3s;
            cursor: text;
        }

        .editable:focus {
            border-color: var(--secondary);
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        /* Placeholder Logic for Divs */
        .editable:empty:before {
            content: attr(data-placeholder);
            color: #ccc;
        }

        /* --- GIF Input --- */
        .gif-input {
            border: 2px solid #ffafcc;
            background: #fff0f5;
        }

        /* --- Save Button --- */
        .btn-save {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-family: 'Mali', cursive;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 6px 0 #ff8a80;
            transition: 0.2s;
        }
        .btn-save:hover { transform: translateY(-3px); box-shadow: 0 8px 0 #ff8a80; }
        .btn-save:active { transform: translateY(4px); box-shadow: none; }

        /* --- Output Card --- */
        #output-area { margin-top: 40px; }
        
        .card-result {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-top: 20px solid var(--secondary);
            margin-bottom: 30px;
            position: relative;
        }

        .card-header { text-align: center; margin-bottom: 20px; border-bottom: 2px dashed #eee; padding-bottom: 20px; }
        .card-word { font-size: 2.5rem; color: var(--secondary); font-weight: bold; }
        
        .card-section { margin-bottom: 25px; padding: 15px; border-radius: 15px; background: #fcfcfc; border-left: 5px solid #ddd; }
        .card-section.c1 { border-color: #ffb7b2; background: #fffbfb; }
        .card-section.c2 { border-color: #a0c4ff; background: #f4f9ff; }
        .card-section.c3 { border-color: #caffbf; background: #f9fff6; }
        .card-section.c4 { border-color: #bdb2ff; background: #faf9ff; }

        .card-gif { max-width: 100%; border-radius: 10px; margin-top: 10px; border: 3px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        
        .line-item { margin-bottom: 8px; font-family: 'Kodchasan', sans-serif; }
        .label-tag { font-weight: bold; color: #555; background: #eee; padding: 2px 6px; border-radius: 5px; font-size: 0.8rem; margin-right: 5px; }
        
        .footer-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; background: #fdfdfd; padding: 15px; border-radius: 15px; border: 1px dashed #ccc; }

        /* Highlight classes */
        .highlight-bg { background-color: var(--highlight); padding: 0 2px; }
        .color-text { color: var(--primary); }

    </style>
</head>
<body>

    <div class="toolbar">
        <span style="font-size: 0.9rem; margin-right: 10px;">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á:</span>
        <button class="tool-btn" onclick="execCmd('bold')" title="‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤"><i class="fas fa-bold"></i></button>
        <button class="tool-btn" onclick="execCmd('italic')" title="‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏µ‡∏¢‡∏á"><i class="fas fa-italic"></i></button>
        <button class="tool-btn" onclick="execCmd('hiliteColor', '#fdffb6')" title="‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°"><i class="fas fa-highlighter"></i></button>
        
        <label class="color-label" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£">
            <input type="color" id="color-picker" onchange="execCmd('foreColor', this.value)">
        </label>
    </div>

    <div class="container">
        <h1>üìî My Phrasal Verb Diary</h1>

        <div class="main-card">
            
            <div class="header-input">
                <div class="editable" id="main-word" data-placeholder="‚ú® ‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏´‡∏•‡∏±‡∏Å + ‡∏≠‡∏¥‡πÇ‡∏°‡∏à‡∏¥ ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢..." style="font-size: 1.5rem; text-align: center; border: 3px solid var(--secondary);" contenteditable="true"></div>
            </div>

            <div class="section-block s1">
                <div class="section-title">üçì STRUCTURE 1</div>
                
                <div class="row">
                    <div class="col"><div class="editable gif-input" id="s1-gif" data-placeholder="üîó ‡∏ß‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏ü‡∏•‡πå GIF ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><div class="editable" id="s1-en" data-placeholder="üá¨üáß EN 1" contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><div class="editable" id="s1-th1" data-placeholder="üáπüá≠ TH 1.1" contenteditable="true"></div></div>
                    <div class="col"><div class="editable" id="s1-th2" data-placeholder="üáπüá≠ TH 1.2" contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><div class="editable" id="s1-th3" data-placeholder="üáπüá≠ TH 1.3" contenteditable="true"></div></div>
                    <div class="col"><div class="editable" id="s1-th4" data-placeholder="üáπüá≠ TH 1.4" contenteditable="true"></div></div>
                    <div class="col"><div class="editable" id="s1-th5" data-placeholder="üáπüá≠ TH 1.5" contenteditable="true"></div></div>
                </div>
                <div style="margin-top: 10px;">
                    <div class="editable" id="s1-ex1" data-placeholder="üí¨ EX.1" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s1-ex2" data-placeholder="üí¨ EX.2" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s1-ex3" data-placeholder="üí¨ EX.3" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s1-ex4" data-placeholder="üí¨ EX.4" contenteditable="true"></div>
                </div>
            </div>

            <div class="section-block s2">
                <div class="section-title">ü´ê STRUCTURE 2</div>
                <div class="row"><div class="col"><div class="editable gif-input" id="s2-gif" data-placeholder="üîó GIF Link..." contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s2-en" data-placeholder="üá¨üáß EN 2" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s2-th1" data-placeholder="üáπüá≠ TH 2.1" contenteditable="true"></div></div><div class="col"><div class="editable" id="s2-th2" data-placeholder="üáπüá≠ TH 2.2" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s2-th3" data-placeholder="üáπüá≠ TH 2.3" contenteditable="true"></div></div><div class="col"><div class="editable" id="s2-th4" data-placeholder="üáπüá≠ TH 2.4" contenteditable="true"></div></div><div class="col"><div class="editable" id="s2-th5" data-placeholder="üáπüá≠ TH 2.5" contenteditable="true"></div></div></div>
                <div style="margin-top: 10px;">
                    <div class="editable" id="s2-ex1" data-placeholder="üí¨ EX.1" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s2-ex2" data-placeholder="üí¨ EX.2" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s2-ex3" data-placeholder="üí¨ EX.3" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s2-ex4" data-placeholder="üí¨ EX.4" contenteditable="true"></div>
                </div>
            </div>

            <div class="section-block s3">
                <div class="section-title">üçà STRUCTURE 3</div>
                <div class="row"><div class="col"><div class="editable gif-input" id="s3-gif" data-placeholder="üîó GIF Link..." contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s3-mean" data-placeholder="üìñ MEANING 3" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s3-en" data-placeholder="üá¨üáß EN 3" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s3-th1" data-placeholder="üáπüá≠ TH 3.1" contenteditable="true"></div></div><div class="col"><div class="editable" id="s3-th2" data-placeholder="üáπüá≠ TH 3.2" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s3-th3" data-placeholder="üáπüá≠ TH 3.3" contenteditable="true"></div></div><div class="col"><div class="editable" id="s3-th4" data-placeholder="üáπüá≠ TH 3.4" contenteditable="true"></div></div><div class="col"><div class="editable" id="s3-th5" data-placeholder="üáπüá≠ TH 3.5" contenteditable="true"></div></div></div>
                <div style="margin-top: 10px;">
                    <div class="editable" id="s3-ex1" data-placeholder="üí¨ EX.1" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s3-ex2" data-placeholder="üí¨ EX.2" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s3-ex3" data-placeholder="üí¨ EX.3" contenteditable="true" style="margin-bottom: 5px;"></div>
                    <div class="editable" id="s3-ex4" data-placeholder="üí¨ EX.4" contenteditable="true"></div>
                </div>
            </div>

            <div class="section-block s4">
                <div class="section-title">üçá STRUCTURE 4</div>
                <div class="row"><div class="col"><div class="editable gif-input" id="s4-gif" data-placeholder="üîó GIF Link..." contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s4-en" data-placeholder="üá¨üáß EN 4" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s4-th1" data-placeholder="üáπüá≠ TH 4.1" contenteditable="true"></div></div><div class="col"><div class="editable" id="s4-th2" data-placeholder="üáπüá≠ TH 4.2" contenteditable="true"></div></div></div>
                <div class="row"><div class="col"><div class="editable" id="s4-th3" data-placeholder="üáπüá≠ TH 4.3" contenteditable="true"></div></div><div class="col"><div class="editable" id="s4-th4" data-placeholder="üáπüá≠ TH 4.4" contenteditable="true"></div></div><div class="col"><div class="editable" id="s4-th5" data-placeholder="üáπüá≠ TH 4.5" contenteditable="true"></div></div></div>
            </div>

            <div class="section-block" style="border-color: #ddd;">
                <div class="section-title" style="color: #666; border-color: #ddd;">üìö EXTRA INFO</div>
                <div class="row">
                    <div class="col"><label>GRAMMAR</label><div class="editable" id="grammar" contenteditable="true"></div></div>
                    <div class="col"><label>DERIVE WORDS</label><div class="editable" id="derive" contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><label>WORD FAMILY</label><div class="editable" id="family" contenteditable="true"></div></div>
                    <div class="col"><label>SYN/OP</label><div class="editable" id="synop" contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><label>SYNTAX</label><div class="editable" id="syntax" contenteditable="true"></div></div>
                </div>
                <div class="row">
                    <div class="col"><label>FYI</label><div class="editable" id="fyi" contenteditable="true"></div></div>
                </div>
            </div>

            <button class="btn-save" onclick="generateCard()">üíñ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏™‡∏°‡∏∏‡∏î</button>

        </div>

        <div id="output-area"></div>
    </div>

    <script>
        // Function for Rich Text Editing
        function execCmd(command, value = null) {
            document.execCommand(command, false, value);
        }

        // Helper to get HTML content (not just text)
        function getContent(id) {
            const el = document.getElementById(id);
            return (el && el.innerHTML.trim() !== "" && el.innerHTML !== "<br>") ? el.innerHTML : null;
        }

        // Helper to create GIF element
        function createGifHtml(link) {
            // Remove html tags from link if user pasted formatted text
            const cleanLink = link.replace(/<[^>]*>?/gm, ''); 
            if (cleanLink && cleanLink.startsWith('http')) {
                return `<img src="${cleanLink}" class="card-gif" alt="Gif">`;
            } else if (cleanLink) {
                return `<div style="color:red; font-size:0.8rem;">(Invalid GIF Link)</div>`;
            }
            return '';
        }

        function createLine(label, content, icon = '') {
            if (content) {
                return `<div class="line-item"><span class="label-tag">${icon} ${label}</span> ${content}</div>`;
            }
            return '';
        }

        function generateCard() {
            const mainWord = getContent('main-word');

            if (!mainWord) {
                alert("‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡πâ‡∏≤ ü•∫");
                return;
            }

            // Build Structure 1 HTML
            let s1Html = '';
            if (getContent('s1-en') || getContent('s1-th1')) {
                s1Html += `<div class="card-section c1">
                    <h3 style="margin:0 0 10px 0; color:#ff6f61;">üçì Structure 1</h3>
                    ${createGifHtml(document.getElementById('s1-gif').innerText)}
                    ${createLine('EN', getContent('s1-en'))}
                    ${createLine('TH 1.1', getContent('s1-th1'))}
                    ${createLine('TH 1.2', getContent('s1-th2'))}
                    ${createLine('TH 1.3', getContent('s1-th3'))}
                    ${createLine('TH 1.4', getContent('s1-th4'))}
                    ${createLine('TH 1.5', getContent('s1-th5'))}
                    <hr style="border:1px dashed #ffb7b2; opacity:0.5;">
                    ${createLine('EX.1', getContent('s1-ex1'))}
                    ${createLine('EX.2', getContent('s1-ex2'))}
                    ${createLine('EX.3', getContent('s1-ex3'))}
                    ${createLine('EX.4', getContent('s1-ex4'))}
                </div>`;
            }

            // Build Structure 2 HTML
            let s2Html = '';
            if (getContent('s2-en') || getContent('s2-th1')) {
                s2Html += `<div class="card-section c2">
                    <h3 style="margin:0 0 10px 0; color:#4dabf7;">ü´ê Structure 2</h3>
                    ${createGifHtml(document.getElementById('s2-gif').innerText)}
                    ${createLine('EN', getContent('s2-en'))}
                    ${createLine('TH 2.1', getContent('s2-th1'))}
                    ${createLine('TH 2.2', getContent('s2-th2'))}
                    ${createLine('TH 2.3', getContent('s2-th3'))}
                    ${createLine('TH 2.4', getContent('s2-th4'))}
                    ${createLine('TH 2.5', getContent('s2-th5'))}
                    <hr style="border:1px dashed #a0c4ff; opacity:0.5;">
                    ${createLine('EX.1', getContent('s2-ex1'))}
                    ${createLine('EX.2', getContent('s2-ex2'))}
                    ${createLine('EX.3', getContent('s2-ex3'))}
                    ${createLine('EX.4', getContent('s2-ex4'))}
                </div>`;
            }

            // Build Structure 3 HTML
            let s3Html = '';
            if (getContent('s3-en') || getContent('s3-mean')) {
                s3Html += `<div class="card-section c3">
                    <h3 style="margin:0 0 10px 0; color:#69db7c;">üçà Structure 3</h3>
                    ${createGifHtml(document.getElementById('s3-gif').innerText)}
                    ${createLine('MEANING', getContent('s3-mean'))}
                    ${createLine('EN', getContent('s3-en'))}
                    ${createLine('TH 3.1', getContent('s3-th1'))}
                    ${createLine('TH 3.2', getContent('s3-th2'))}
                    ${createLine('TH 3.3', getContent('s3-th3'))}
                    ${createLine('TH 3.4', getContent('s3-th4'))}
                    ${createLine('TH 3.5', getContent('s3-th5'))}
                    <hr style="border:1px dashed #caffbf; opacity:0.5;">
                    ${createLine('EX.1', getContent('s3-ex1'))}
                    ${createLine('EX.2', getContent('s3-ex2'))}
                    ${createLine('EX.3', getContent('s3-ex3'))}
                    ${createLine('EX.4', getContent('s3-ex4'))}
                </div>`;
            }

            // Build Structure 4 HTML
            let s4Html = '';
            if (getContent('s4-en') || getContent('s4-th1')) {
                s4Html += `<div class="card-section c4">
                    <h3 style="margin:0 0 10px 0; color:#9775fa;">üçá Structure 4</h3>
                    ${createGifHtml(document.getElementById('s4-gif').innerText)}
                    ${createLine('EN', getContent('s4-en'))}
                    ${createLine('TH 4.1', getContent('s4-th1'))}
                    ${createLine('TH 4.2', getContent('s4-th2'))}
                    ${createLine('TH 4.3', getContent('s4-th3'))}
                    ${createLine('TH 4.4', getContent('s4-th4'))}
                    ${createLine('TH 4.5', getContent('s4-th5'))}
                </div>`;
            }

            // Extras
            let extraHtml = `<div class="footer-grid">
                <div>${createLine('GRAMMAR', getContent('grammar'), 'üìò')}</div>
                <div>${createLine('DERIVE', getContent('derive'), 'üå±')}</div>
                <div>${createLine('FAMILY', getContent('family'), 'üë®‚Äçüë©‚Äçüëß')}</div>
                <div>${createLine('SYN/OP', getContent('synop'), 'üîÑ')}</div>
                <div style="grid-column: span 2;">${createLine('SYNTAX', getContent('syntax'), 'üß©')}</div>
                <div style="grid-column: span 2;">${createLine('FYI', getContent('fyi'), 'üí°')}</div>
            </div>`;

            // Combine All
            const cardHtml = `
                <div class="card-result">
                    <div class="card-header">
                        <div class="card-word">${mainWord}</div>
                    </div>
                    ${s1Html}
                    ${s2Html}
                    ${s3Html}
                    ${s4Html}
                    ${extraHtml}
                </div>
            `;

            document.getElementById('output-area').insertAdjacentHTML('afterbegin', cardHtml);
            
            // Clear fields (Optional - remove comments to enable)
            // document.querySelectorAll('.editable').forEach(el => el.innerHTML = '');
            
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>
